<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="A match predictor for Hattrick">
	<title>IMP: Match Predictor</title>
	<script src="imp/binomial.js" type="text/javascript"></script>
	<script src="imp/predictor.js" type="text/javascript"></script>
	<script src="imp/ratings.js" type="text/javascript"></script>
	<script src="imp/ui/form.js" type="text/javascript"></script>
	<script src="imp/ui/prediction.js" type="text/javascript"></script>
	<link href="res/bootstrap.min.css" rel="stylesheet">
	<link href="res/style.css" rel="stylesheet">
	<link href="res/img/favicon.svg" rel="icon" type="image/svg+xml">
</head>
<body class="d-flex flex-column min-vh-100">
<header class="navbar navbar-light border-bottom">
	<nav class="container">
		<a href="#" class="navbar-brand"><img src="res/img/favicon.svg" width="32" class="me-2 align-top">IMP</a>
	</nav>
</header>
<main class="container my-3">
	<div class="row">
		<div class="col-12 col-md-6">
			<h3>Home team</h3>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="home_rd"><span class="fw-bolder">-</span> Right defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_rd">
				</div>
				<div class="col-4">
					<label for="home_cd"><span class="fw-bolder">-</span> Central defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_cd">
				</div>
				<div class="col-4">
					<label for="home_ld"><span class="fw-bolder">-</span> Left defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_ld">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="home_mf"><span class="fw-bolder">-</span> Midfield</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_mf">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="home_ra"><span class="fw-bolder">-</span> Right attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_ra">
				</div>
				<div class="col-4">
					<label for="home_ca"><span class="fw-bolder">-</span> Central attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_ca">
				</div>
				<div class="col-4">
					<label for="home_la"><span class="fw-bolder">-</span> Left attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_la">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="home_sd"><span class="fw-bolder">-</span> Ind. SP defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_sd">
				</div>
				<div class="col-4">
					<label for="home_sa"><span class="fw-bolder">-</span> Ind. SP attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="home_sa">
				</div>
				<div class="col-4">
					<label for="home_sp">Direct SP %</label>
					<input type="number" value="25" class="form-control text-center" id="home_sp">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-8">
					<label for="home_tc">Tactic</label>
					<select class="form-select" id="home_tc">
						<option value="0">Normal</option>
						<option value="1">Pressing</option>
						<option value="2">Counter-attacks</option>
						<option value="3">Attack in the middle</option>
						<option value="4">Attack on the wings</option>
						<option value="8">Long shots</option>
					</select>
				</div>
				<div class="col-4">
					<label for="home_tl">Tactic level</label>
					<input type="number" class="form-control text-center" id="home_tl">
				</div>
			</div>
			<div class="my-3 d-flex">
				<button type="button" class="btn btn-outline" onclick="IMP.form.saveHomeRatings()">Save</button>
				<label for="load_home" class="btn btn-outline ms-2 my-0">Load</label>
				<input type="file" accept=".imp" class="d-none" id="load_home" onchange="IMP.form.loadHomeRatings(this)">
				<button type="button" class="btn btn-outline ms-2" onclick="IMP.form.flipHomeRatings()">Flip</button>
			</div>
		</div>
		<div class="col-12 col-md-6">
			<h3>Away team</h3>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="away_rd"><span class="fw-bolder">-</span> Right defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_rd">
				</div>
				<div class="col-4">
					<label for="away_cd"><span class="fw-bolder">-</span> Central defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_cd">
				</div>
				<div class="col-4">
					<label for="away_ld"><span class="fw-bolder">-</span> Left defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_ld">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="away_mf"><span class="fw-bolder">-</span> Midfield</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_mf">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="away_ra"><span class="fw-bolder">-</span> Right attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_ra">
				</div>
				<div class="col-4">
					<label for="away_ca"><span class="fw-bolder">-</span> Central attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_ca">
				</div>
				<div class="col-4">
					<label for="away_la"><span class="fw-bolder">-</span> Left attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_la">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-4">
					<label for="away_sd"><span class="fw-bolder">-</span> Ind. SP defense</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_sd">
				</div>
				<div class="col-4">
					<label for="away_sa"><span class="fw-bolder">-</span> Ind. SP attack</label>
					<input type="number" value="10.00" step="0.25" class="form-control text-center" id="away_sa">
				</div>
				<div class="col-4">
					<label for="away_sp">Direct SP %</label>
					<input type="number" value="25" class="form-control text-center" id="away_sp">
				</div>
			</div>
			<div class="row justify-content-center align-items-end">
				<div class="col-8">
					<label for="away_tc">Tactic</label>
					<select class="form-select" id="away_tc">
						<option value="0">Normal</option>
						<option value="1">Pressing</option>
						<option value="2">Counter-attacks</option>
						<option value="3">Attack in the middle</option>
						<option value="4">Attack on the wings</option>
						<option value="8">Long shots</option>
					</select>
				</div>
				<div class="col-4">
					<label for="away_tl">Tactic level</label>
					<input type="number" class="form-control text-center" id="away_tl">
				</div>
			</div>
			<div class="my-3 d-flex justify-content-end">
				<button type="button" class="btn btn-outline" onclick="IMP.form.saveAwayRatings()">Save</button>
				<label for="load_away" class="btn btn-outline ms-2 my-0">Load</label>
				<input type="file" accept=".imp" class="d-none" id="load_away" onchange="IMP.form.loadAwayRatings(this)">
				<button type="button" class="btn btn-outline ms-2" onclick="IMP.form.flipAwayRatings()">Flip</button>
			</div>
		</div>
	</div>
	<button
		type="button"
		class="btn btn-regular float-end"
		onclick="IMP.prediction.printPrediction()"
		>Predict</button>
	<h3>Prediction</h3>
	<button
		id="copyForumBtn"
		class="btn btn-inverted position-absolute p-1 my-1"
		onclick="IMP.prediction.copyForumTable(this)"
		title="Copy forum table"
		><img src="res/img/copy.svg" width=16></button>
	<table class="table text-center">
		<thead>
			<tr><th width="33%">Home</th><th width="33%">Draw</th><th width="33%">Away</th></tr>
		</thead>
		<tbody>
			<tr><td id="pred1">-</td><td id="predx">-</td><td id="pred2">-</td></tr>
			<tr><td id="goal1">-</td><th>Goals</th><td id="goal2">-</td></tr>
			<tr><td id="chan1">-</td><th>Chances</th><td id="chan2">-</td></tr>
			<tr><td id="scor1">-</td><th>Scoring</th><td id="scor2">-</td></tr>
		</tbody>
	</table>
	<div class="table-responsive-md" id="gradient"></div>
	<p>Sim doesn't understand if the tactic skill is enough compared to the mainskill average of the players. So be careful when it suggests that CA is a good tactic, with tactic skill of 10 and combined hatstats in the game are something like 800.</p>
	<p>Special events are coming soon.</p>
	<script type="text/javascript">
		document.onload = IMP.form.updateLiveProbabilities();
		document.querySelectorAll('[step="0.25"]').forEach(input => {
			input.addEventListener('change', IMP.form.updateLiveProbabilities);
			input.addEventListener('change', function(event) {
				this.value = Number(this.value).toFixed(2);
			});
		});
	</script>
</main>
<footer class="mt-auto">
	<ul class="nav justify-content-center border-top py-2 text-center">
		<li class="nav-item">
			<a href="https://github.com/shotgunshine/imp" class="nav-link text-muted">GitHub</a>
		</li>
	</ul>
</footer>
<script type="text/javascript">
	function switchTheme(theme) {
		document.querySelector('html').setAttribute('data-bs-theme', theme);
	}
	const colorMode = window.matchMedia('(prefers-color-scheme: dark)');
	switchTheme(colorMode.matches ? 'dark' : 'light');
	colorMode.addEventListener('change', c => {
		switchTheme(c.matches ? 'dark' : 'light');
	});
</script>
</body>
</html>
